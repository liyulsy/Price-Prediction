# TimeXer四实验对比脚本

## 🎯 功能

一次性运行四个TimeXer实验配置，自动对比分析结果：

1. **Baseline**: 无GCN + 无新闻（仅价格数据）
2. **GCN Only**: 有GCN + 无新闻
3. **News Only**: 无GCN + 有新闻  
4. **GCN + News**: 有GCN + 有新闻

## 🚀 使用方法

```bash
python scripts/training/four_experiments.py
```

## 📊 输出示例

```
🚀 TimeXer四实验对比
⚡ 快速版本 - 每个实验15轮训练
📅 开始时间: 2024-01-15 14:30:00

==================================================
📋 基线（仅价格）
🔬 实验 baseline
   GCN: ❌ | News: ❌
✅ 完成 | MAE: 0.0234 | 耗时: 180.5s

==================================================
📋 仅GCN
🔬 实验 gcn_only
   GCN: ✅ | News: ❌
✅ 完成 | MAE: 0.0198 | 耗时: 195.2s

==================================================
📋 仅新闻
🔬 实验 news_only
   GCN: ❌ | News: ✅
✅ 完成 | MAE: 0.0201 | 耗时: 188.7s

==================================================
📋 GCN+新闻
🔬 实验 gcn_news
   GCN: ✅ | News: ✅
✅ 完成 | MAE: 0.0187 | 耗时: 203.1s

⏱️  总耗时: 767.5 秒

================================================================================
📊 TimeXer四实验对比结果
================================================================================
✅ 成功: 4/4

📋 实验对比表:
  Experiment  GCN News Duration(s)     MAE     MSE    RMSE      R2 MAPE(%)
    baseline   ❌   ❌       180.5  0.0234  0.0012  0.0346  0.8567    2.34
    gcn_only   ✅   ❌       195.2  0.0198  0.0009  0.0301  0.8734    1.98
   news_only   ❌   ✅       188.7  0.0201  0.0010  0.0316  0.8712    2.01
    gcn_news   ✅   ✅       203.1  0.0187  0.0008  0.0283  0.8823    1.87

🏆 最佳结果:
   最低MAE: gcn_news (0.0187)
   最高R²:  gcn_news (0.8823)

🔍 相对基线改善 (基线MAE: 0.0234):
   GCN     : +15.38% (改善)
   News    : +14.10% (改善)
   GCN+News: +20.09% (改善)

✅ 结果符合预期: GCN+News (0.0187) < Baseline (0.0234)

💾 结果已保存:
   📊 对比表格: experiments/four_experiments/comparison_20240115_143000.csv
   📋 详细结果: experiments/four_experiments/detailed_20240115_143000.json

🎉 四实验对比完成！
📁 查看 experiments/four_experiments/ 目录获取详细结果
```

## 📁 输出文件

### 1. 对比表格 (CSV)
包含所有实验的指标对比，可以用Excel打开查看

### 2. 详细结果 (JSON)  
包含完整的实验配置、指标和错误信息

## ⚙️ 配置说明

脚本会自动：
- 设置训练轮数为15（快速版本）
- 早停耐心值为6
- 为每个实验使用不同的模型保存名称
- 自动恢复原始脚本配置

## 🎯 预期结果

如果你的假设正确，应该看到：
- **GCN+News** 效果最好（MAE最低）
- **GCN Only** 和 **News Only** 效果中等
- **Baseline** 效果最差
- 显示"✅ 结果符合预期"

## ⏱️ 预计时间

约20-40分钟完成所有四个实验（取决于硬件配置）

## 🔧 故障排除

如果某个实验失败：
1. 检查数据文件是否存在
2. 确保有足够的GPU内存
3. 查看详细错误信息
4. 可以单独运行失败的配置进行调试
